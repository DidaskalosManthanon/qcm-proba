<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QCM sur les probabilit√©s</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.geogebra.org/apps/deployggb.js "></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax @3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <header>
        <h1>Comprendre et utiliser des notions √©l√©mentaires de probabilit√©s (niveau 3<sup>√®me</sup>)</h1>
        <h2>Ce que sait faire l'√©l√®ve (voir les <a href="https://eduscol.education.fr/document/14068/download " target="_blank">attendus de fin d'ann√©e</a>)</h2>
        <ul>
            <li id="CQSFE1">
                √Ä partir de d√©nombrements, il calcule des probabilit√©s pour des exp√©riences al√©atoires simples √† une ou deux √©preuves : 
                <a href="#MEO1">mise en oeuvre concr√®te.</a>
            </li>
            <li id="CQSFE2">
                Il fait le lien entre stabilisation des fr√©quences et probabilit√©s : 
                <a href="#MEO2">mise en oeuvre concr√®te.</a>
            </li>
        </ul>
        <h2>Exemples de r√©ussite</h2>
        <ul>
            <li>
                On suppose que, pour un couple, la probabilit√© d'avoir une fille ou un gar√ßon est la m√™me. Un couple souhaite avoir deux enfants.
                <ul>
                    <li>Calculer la probabilit√© d‚Äôavoir deux gar√ßons.</li>
                    <li>Calculer la probabilit√© d‚Äôavoir au moins une fille.</li>
                </ul>
                <em>Il peut utiliser le fait que c‚Äôest l‚Äô√©v√©nement contraire d‚Äôavoir deux gar√ßons.</em>
            </li>
            <li>
                On tire, deux fois de suite et avec remise, une boule dans une urne contenant une boule bleue et deux boules violettes.
                D√©terminer la probabilit√© de tirer successivement deux boules violettes, en utilisant une m√©thode de d√©nombrement prenant appui sur un tableau √† double entr√©e.
            </li>
            <li>
                On donne les fr√©quences d'apparition de chaque face d'un d√© pour 10 000 lancers. L'√©l√®ve interpr√®te les r√©sultats en les comparant aux probabilit√©s th√©oriques.
            </li>
            <li>L'√©l√®ve interpr√®te des simulations effectu√©es sur tableur ou logiciel de programmation en fonction d‚Äôun nombre de lancers.</li>
        </ul>    
    </header>

    <main>
        <section id="yourgame">
            <h2>√Ä vous de jouer</h2>

            <!-- QUESTIONS EXISTANTES -->
            <article>
                <h3 id="MEO1">D√©nombrement <a href="#CQSFE1">(revoir les attendus)</a></h3>
                <ol start="1">
                    <li class="question" data-points="1" data-type="radio">
                        <p>Si on lance deux fois de suite une pi√®ce de monnaie, en tenant compte de l'ordre, combien y a-t-il d‚Äôissues possibles ?</p>
                        <ol class="resp">
                            <li><input type="radio" name="q1r1"><label for="q1r1">1</label></li>
                            <li><input type="radio" name="q1r2"><label for="q1r2">2</label></li>
                            <li><input type="radio" name="q1r3"><label for="q1r3">3</label></li>
                            <li><input type="radio" name="q1r4" data-correct><label for="q1r4">4</label></li>
                        </ol>
                    </li>
                    <li class="question" data-points="1" data-type="radio">
                        <p>Si on lance deux fois de suite une pi√®ce de monnaie, sans tenir compte de l'ordre, combien y a-t-il d‚Äôissues possibles ?</p>
                        <ol class="resp">
                            <li><input type="radio" name="q2r1"><label for="q2r1">1</label></li>
                            <li><input type="radio" name="q2r2"><label for="q2r2">2</label></li>
                            <li><input type="radio" name="q2r3" data-correct><label for="q2r3">3</label></li>
                            <li><input type="radio" name="q2r4"><label for="q2r4">4</label></li>
                        </ol>
                    </li>
                    <li class="question" data-points="1" data-type="radio">
                        <p>Si on lance simultan√©ment deux pi√®ces indiscernables, combien y a-t-il d‚Äôissues possibles ?</p>
                        <ol class="resp">
                            <li><input type="radio" name="q3r1"><label for="q3r1">1</label></li>
                            <li><input type="radio" name="q3r2"><label for="q3r2">2</label></li>
                            <li><input type="radio" name="q3r3" data-correct><label for="q3r3">3</label></li>
                            <li><input type="radio" name="q3r4"><label for="q3r4">4</label></li>
                        </ol>
                    </li>
                </ol>
            </article>

            <!-- SIMULATEUR DE PILE OU FACE (Question 6) -->
            <article>
                <h3 id="MEO2bis">Simulateur de Pile ou Face <a href="#CQSFE2">(revoir les attendus)</a></h3>
                <ol start="6">
                    <li class="question" data-points="4" data-type="checkbox">
                        <section id="pile-ou-face">
                            <h4>Simulateur de Pile ou Face</h4>

                            <!-- S√©lection du nombre de lancers -->
                            <label for="nombreLancers">Nombre de lancers :</label>
                            <select id="nombreLancers">
                                <option value="10">10</option>
                                <option value="100">100</option>
                                <option value="1000">1‚ÄØ000</option>
                                <option value="10000">10‚ÄØ000</option>
                                <option value="100000">100‚ÄØ000</option>
                                <option value="1000000">1‚ÄØ000‚ÄØ000</option>
                            </select>
                            <button onclick="simulerPileFace()">Lancer</button>

                            <!-- R√©sultats -->
                            <div id="resultats" style="margin-top: 20px;"></div>

                            <!-- Propositions de probabilit√© -->
                            <div id="propositions" style="margin-top: 20px; display: none;"></div>
                        </section>
                    </li>
                </ol>
            </article>

        </section>

        <button id="submit-btn">Envoyer</button>
        <div id="score-details">
            <p id="score-display">Score total : 0/48</p>
            <ul id="question-points"></ul>
        </div>
    </main>

    <footer>
        <p>üìö Envie de progresser en maths ? Voir mon annonce sur <a href="https://www.superprof.fr/reussissez-maths-niveau-etudes-esprit.html " target="_blank">superprof</a></p>
        <p>&copy; 2025 - <strong>Didaskalos Manthanon</strong>, <em>Apprenez √† devenir un ma√Ætre apprenant</em></p>
    </footer>

    <script>
        function simulerPileFace() {
            const nbLancers = parseInt(document.getElementById("nombreLancers").value);
            let pile = 0;
            let face = 0;

            // Simule les lancers
            for (let i = 0; i < nbLancers; i++) {
                if (Math.random() < 0.5) {
                    pile++;
                } else {
                    face++;
                }
            }

            // Affiche les r√©sultats
            const resultatsDiv = document.getElementById("resultats");
            resultatsDiv.innerHTML = `
            <p><strong>R√©sultats :</strong></p>
            <ul>
                <li>Pile : ${pile}</li>
                <li>Face : ${face}</li>
            </ul>
            `;

            const propListe = document.getElementById("propositions");
            propListe.innerHTML = ""; // Vide les anciennes propositions

            const probaPile = pile / nbLancers;
            const num = pile;
            const den = nbLancers;

            // Fonction pour simplifier une fraction
            function pgcd(a, b) {
                while (b !== 0) [a, b] = [b, a % b];
                return a;
            }

            const d = pgcd(num, den);
            const numReduit = num / d;
            const denReduit = den / d;

            const propositions = [
                { label: 'a.', content: '\\(\\frac{1}{2}\\)' },
                { label: 'b.', content: `\\(\\frac{${numReduit}}{${denReduit}}\\)` },
                { label: 'c.', content: '0.5' },
                { label: 'd.', content: `${+(probaPile + (Math.random() * 0.02 - 0.01)).toFixed(3)}` }
            ];

            const propsHTML = `
            <p><strong>Quelle est la probabilit√© d‚Äôobtenir Pile ?</strong></p>
            <div class="resp" id="propositions-liste"></div>
            <button onclick="verifierReponseQ6()" style="margin-top: 10px;">V√©rifier</button>
            `;

            propListe.innerHTML = propsHTML;
            propListe.style.display = "block";

            const propListeDiv = document.getElementById("propositions-liste");
            propListeDiv.innerHTML = "";

            propositions.forEach((p, index) => {
                const id = "q6r" + (index + 1);
                const isCorrect = p.content.includes(`\\frac{${numReduit}}{${denReduit}}`);
                const li = document.createElement("div");
                li.className = "choice";
                li.innerHTML = `
                <input type="radio" name="q6reponse" id="${id}" ${isCorrect ? 'data-correct' : ''}>
                <label for="${id}">${p.label} ${p.content}</label>
                `;
                propListeDiv.appendChild(li);
            });

            // Force MathJax √† interpr√©ter le LaTeX
            if (typeof MathJax !== 'undefined') {
                MathJax.typeset();
            }
        }

        function verifierReponseQ6() {
            const radios = document.querySelectorAll('input[name="q6reponse"]');
            let selected = null;
            for (const radio of radios) {
                if (radio.checked) selected = radio;
            }

            const correct = document.querySelector('input[name="q6reponse"][data-correct]');
            const messageDiv = document.createElement("div");

            if (selected === correct) {
                messageDiv.innerHTML = '<p style="color:green;">‚úÖ R√©ponse correcte !</p>';
                window.q6Score = 4;
            } else {
                messageDiv.innerHTML = '<p style="color:red;">‚ùå R√©ponse incorrecte.</p>';
                window.q6Score = 0;
            }

            document.getElementById("propositions").appendChild(messageDiv);
            updateGlobalScore();
        }

        function updateGlobalScore() {
            let totalPoints = 0;
            document.querySelectorAll('.question').forEach((el, index) => {
                const points = parseInt(el.getAttribute("data-points")) || 0;
                const type = el.getAttribute("data-type");
                
                if (type === "radio") {
                    const checked = el.querySelector("input:checked");
                    if (checked && checked.dataset.correct !== undefined) {
                        totalPoints += points;
                    }
                } else if (type === "checkbox") {
                    const correctBoxes = el.querySelectorAll("input[data-correct]");
                    const userChecked = el.querySelectorAll("input:checked");
                    
                    let correctCount = 0;
                    correctBoxes.forEach(box => {
                        if (box.checked) correctCount++;
                    });
                    
                    let wrongChecked = 0;
                    userChecked.forEach(box => {
                        if (!box.dataset.correct && box.checked) wrongChecked++;
                    });
                    
                    if (correctCount === correctBoxes.length && wrongChecked === 0) {
                        totalPoints += points;
                    } else {
                        totalPoints += Math.max(0, correctCount - wrongChecked);
                    }
                }
            });
            
            totalPoints += window.q6Score || 0;
            document.getElementById("score-display").innerText = `Score total : ${totalPoints}/48`;
        }
        window.q6Score = 0;
    </script>
</body>
</html>